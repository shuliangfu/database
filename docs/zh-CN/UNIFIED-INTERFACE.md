# SQLModel ä¸ MongoModel ç»Ÿä¸€æ¥å£

> ğŸ“– [README](../../README.md) | [API å‚è€ƒ](./API.md)

---

## ğŸ”„ SQLModel ä¸ MongoModel ç»Ÿä¸€æ¥å£

`SQLModel` å’Œ `MongoModel` æä¾›ç»Ÿä¸€çš„æ¥å£ï¼Œä¾¿äºåœ¨ä¸åŒæ•°æ®åº“ä¹‹é—´åˆ‡æ¢ä½¿ç”¨ã€‚

### ç»Ÿä¸€æ¥å£å¯¹æ¯”

#### é™æ€æŸ¥è¯¢æ–¹æ³•

| æ–¹æ³•å              | SQLModel | MongoModel | ç»Ÿä¸€çŠ¶æ€                          |
| ------------------- | -------- | ---------- | --------------------------------- |
| `find`              | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€                         |
| `findAll`           | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€                         |
| `findOne`           | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€                         |
| `findById`          | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€                         |
| `count`             | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€                         |
| `exists`            | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€                         |
| `paginate`          | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€                         |
| `distinct`          | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€                         |
| `findOrCreate`      | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€                         |
| `findOneAndUpdate`  | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€                         |
| `findOneAndDelete`  | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€                         |
| `findOneAndReplace` | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€                         |
| `truncate`          | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€                         |
| `aggregate`         | âŒ       | âœ…         | âš ï¸ æ— æ³•ç»Ÿä¸€ï¼ˆSQL ä¸æ”¯æŒèšåˆç®¡é“ï¼‰ |

#### é™æ€æ“ä½œæ–¹æ³•

| æ–¹æ³•å            | SQLModel | MongoModel | ç»Ÿä¸€çŠ¶æ€  |
| ----------------- | -------- | ---------- | --------- |
| `create`          | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `createMany`      | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `update`          | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `updateById`      | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `updateMany`      | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `delete`          | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `deleteById`      | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `deleteMany`      | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `increment`       | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `decrement`       | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `incrementMany`   | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `decrementMany`   | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `upsert`          | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `restore`         | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `restoreById`     | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `forceDelete`     | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `forceDeleteById` | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |

#### æŸ¥è¯¢æ„å»ºå™¨æ–¹æ³•ï¼ˆ`query()`ï¼‰

**æŸ¥è¯¢æ–¹æ³•ï¼š**

| æ–¹æ³•å                     | SQLModel | MongoModel | ç»Ÿä¸€çŠ¶æ€    |
| -------------------------- | -------- | ---------- | ----------- |
| `findAll()`                | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€   |
| `findOne()`                | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€   |
| `one()`                    | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€   |
| `all()`                    | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€   |
| `findById(id, fields?)`    | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€   |
| `count()`                  | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€   |
| `exists()`                 | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€   |
| `distinct(field)`          | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€   |
| `paginate(page, pageSize)` | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€   |
| `aggregate(pipeline)`      | âŒ       | âœ…         | âš ï¸ æ— æ³•ç»Ÿä¸€ |

**æ“ä½œæ–¹æ³•ï¼š**

| æ–¹æ³•å                                          | SQLModel | MongoModel | ç»Ÿä¸€çŠ¶æ€  |
| ----------------------------------------------- | -------- | ---------- | --------- |
| `update(data, returnLatest?)`                   | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `updateById(id, data)`                          | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `updateMany(data)`                              | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `increment(field, amount?, returnLatest?)`      | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `decrement(field, amount?, returnLatest?)`      | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `deleteById(id)`                                | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `deleteMany(options?)`                          | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `restore(options?)`                             | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `restoreById(id)`                               | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `forceDelete(options?)`                         | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `forceDeleteById(id)`                           | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `upsert(data, returnLatest?, resurrect?)`       | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `findOrCreate(data, resurrect?)`                | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `findOneAndUpdate(data, options?)`              | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `findOneAndDelete()`                            | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `findOneAndReplace(replacement, returnLatest?)` | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `incrementMany(fieldOrMap, amount?)`            | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `decrementMany(fieldOrMap, amount?)`            | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |

#### è½¯åˆ é™¤ç›¸å…³æ–¹æ³•

| æ–¹æ³•å             | SQLModel | MongoModel | ç»Ÿä¸€çŠ¶æ€  |
| ------------------ | -------- | ---------- | --------- |
| `withTrashed()`    | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `onlyTrashed()`    | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `scope(scopeName)` | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |

#### å®ä¾‹æ–¹æ³•

| æ–¹æ³•å           | SQLModel | MongoModel | ç»Ÿä¸€çŠ¶æ€  |
| ---------------- | -------- | ---------- | --------- |
| `save()`         | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `update(data)`   | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `delete()`       | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `belongsTo(...)` | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `hasOne(...)`    | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |
| `hasMany(...)`   | âœ…       | âœ…         | âœ… å·²ç»Ÿä¸€ |

#### MongoModel ç‹¬æœ‰æ–¹æ³•

| æ–¹æ³•å                  | SQLModel | MongoModel | ç»Ÿä¸€çŠ¶æ€    | å¤‡æ³¨             |
| ----------------------- | -------- | ---------- | ----------- | ---------------- |
| `createIndexes(force?)` | âŒ       | âœ…         | âš ï¸ æ— æ³•ç»Ÿä¸€ | MongoDB ç´¢å¼•ç®¡ç† |
| `dropIndexes()`         | âŒ       | âœ…         | âš ï¸ æ— æ³•ç»Ÿä¸€ | MongoDB ç´¢å¼•ç®¡ç† |
| `getIndexes()`          | âŒ       | âœ…         | âš ï¸ æ— æ³•ç»Ÿä¸€ | MongoDB ç´¢å¼•ç®¡ç† |
| `transaction(callback)` | âŒ       | âœ…         | âš ï¸ æ— æ³•ç»Ÿä¸€ | MongoDB äº‹åŠ¡     |

#### ç»Ÿä¸€ç‡ç»Ÿè®¡

| ç±»åˆ«                | æ€»æ•°   | å·²ç»Ÿä¸€ | æ— æ³•ç»Ÿä¸€ | ç»Ÿä¸€ç‡    |
| ------------------- | ------ | ------ | -------- | --------- |
| é™æ€æŸ¥è¯¢æ–¹æ³•        | 14     | 13     | 1        | 92.9%     |
| é™æ€æ“ä½œæ–¹æ³•        | 17     | 17     | 0        | 100%      |
| æŸ¥è¯¢æ„å»ºå™¨æŸ¥è¯¢æ–¹æ³•  | 10     | 9      | 1        | 90%       |
| æŸ¥è¯¢æ„å»ºå™¨æ“ä½œæ–¹æ³•  | 18     | 18     | 0        | 100%      |
| è½¯åˆ é™¤ç›¸å…³æ–¹æ³•      | 3      | 3      | 0        | 100%      |
| å®ä¾‹æ–¹æ³•            | 6      | 6      | 0        | 100%      |
| MongoModel ç‹¬æœ‰æ–¹æ³• | 4      | 0      | 4        | -         |
| **æ€»è®¡**            | **72** | **66** | **6**    | **91.7%** |

---
